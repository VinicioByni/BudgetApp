@using BudgetApp.Models
@model ViewModel

<div class="overview-section">
    <button class="month-selector">
        December 2023
    </button>
    <section class="tiles-container">
        <article class="tile budget-tile">
            <div class="header-container">
                <header class="header">
                    <h2 class="title">Budget</h2>
                    <button type="button" class="edit-btn" title="Edit Button">
                        <svg xmlns="http://www.w3.org/2000/svg" class="svg svg-general-size" viewBox="0 0 24 24" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                            <path d="M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1" />
                            <path d="M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z" />
                            <path d="M16 5l3 3" />
                        </svg>
                    </button>
                </header>
                <svg xmlns="http://www.w3.org/2000/svg" class="tile-svg svg-general-size" viewBox="0 0 24 24" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                    <path d="M16 6m-5 0a5 3 0 1 0 10 0a5 3 0 1 0 -10 0" />
                    <path d="M11 6v4c0 1.657 2.239 3 5 3s5 -1.343 5 -3v-4" />
                    <path d="M11 10v4c0 1.657 2.239 3 5 3s5 -1.343 5 -3v-4" />
                    <path d="M11 14v4c0 1.657 2.239 3 5 3s5 -1.343 5 -3v-4" />
                    <path d="M7 9h-2.5a1.5 1.5 0 0 0 0 3h1a1.5 1.5 0 0 1 0 3h-2.5" />
                    <path d="M5 15v1m0 -8v1" />
                </svg>
            </div>
            <footer class="amount-container">
                <p class="amount">$250</p>
                <p class="amount-status">left</p>
            </footer>
        </article>
        <article class="tile balance-tile">
            <div class="header-container">
                <header class="header">
                    <h2 class="title">Balance</h2>
                </header>
                <svg xmlns="http://www.w3.org/2000/svg" class="tile-svg svg-general-size" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="#95b2be" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                    <path d="M7 20l10 0" />
                    <path d="M6 6l6 -1l6 1" />
                    <path d="M12 3l0 17" />
                    <path d="M9 12l-3 -6l-3 6a3 3 0 0 0 6 0" />
                    <path d="M21 12l-3 -6l-3 6a3 3 0 0 0 6 0" />
                </svg>
            </div>
            <footer class="amount-container">
                <p class="amount">$1450</p>
                <svg xmlns="http://www.w3.org/2000/svg" class="tile-svg svg-general-size amount-status-svg" viewBox="0 0 24 24" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                    <path d="M12 5l0 14" />
                    <path d="M16 9l-4 -4" />
                    <path d="M8 9l4 -4" />
                </svg>
            </footer>
        </article>
        <article class="tile income-tile">
            <div class="header-container">
                <header class="header">
                    <h2 class="title">Income</h2>
                </header>
                <svg xmlns="http://www.w3.org/2000/svg" class="tile-svg svg-general-size" viewBox="0 0 24 24" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                    <path d="M7 9m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v6a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
                    <path d="M14 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" />
                    <path d="M17 9v-2a2 2 0 0 0 -2 -2h-10a2 2 0 0 0 -2 2v6a2 2 0 0 0 2 2h2" />
                </svg>
            </div>
            <footer class="amount-container">
                <p class="amount">$2450</p>
                <svg xmlns="http://www.w3.org/2000/svg" class="tile-svg svg-general-size amount-status-svg" viewBox="0 0 24 24" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                    <path d="M12 5l0 14" />
                    <path d="M16 9l-4 -4" />
                    <path d="M8 9l4 -4" />
                </svg>
            </footer>
        </article>
        <article class="tile expense-tile">
            <div class="header-container">
                <header class="header">
                    <h2 class="title">Expenses</h2>
                </header>
                <svg xmlns="http://www.w3.org/2000/svg" class="tile-svg svg-general-size" viewBox="0 0 24 24" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                    <path d="M13 9h6a2 2 0 0 1 2 2v6m-2 2h-10a2 2 0 0 1 -2 -2v-6a2 2 0 0 1 2 -2" />
                    <path d="M12.582 12.59a2 2 0 0 0 2.83 2.826" />
                    <path d="M17 9v-2a2 2 0 0 0 -2 -2h-6m-4 0a2 2 0 0 0 -2 2v6a2 2 0 0 0 2 2h2" />
                    <path d="M3 3l18 18" />
                </svg>
            </div>
            <footer class="amount-container">
                <p class="amount">$1000</p>
                <svg xmlns="http://www.w3.org/2000/svg" class="tile-svg svg-general-size amount-status-svg" viewBox="0 0 24 24" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                    <path d="M12 5l0 14" />
                    <path d="M16 9l-4 -4" />
                    <path d="M8 9l4 -4" />
                </svg>
            </footer>
        </article>
    </section>
</div>
@{/*
    @{
    ViewBag.Title = "Index";
    DateTime currentDate = DateTime.Now;
    string today = currentDate.ToString("dd-MMMM-yyyy");
    string day = currentDate.ToString("dd");
    string month = currentDate.ToString("MMMM");
    string year = currentDate.ToString("yyyy");

    string monthAndYear = currentDate.ToString("yyyy-MM");

    string defaultInitialPeriodDate = currentDate.ToString("MM-01-yyyy");
    string lastMonth = SubtractMonthsFromDate(currentDate, 1);
    string pastThreeMonths = SubtractMonthsFromDate(currentDate, 2);
    string pastSixMonths = SubtractMonthsFromDate(currentDate, 5);
    string pastTwelveMonths = SubtractMonthsFromDate(currentDate, 11);


    }
    @functions{
    public string SubtractMonthsFromDate(DateTime date, int monthsRemoved)
        {
        return date.AddMonths(-monthsRemoved).ToString("MM-01-yyyy");
            }
        }


        <div class="container-fluid">
    <div class="row justify-content-center">
        <div class="main-col mt-3">
            <div class="row justify-content-between">
                <div class="col-md align-self-center">
                    <h4 class="text-color ms-3 mb-0">Today is: @day of @month @year</h4>
                </div>
                <div class="col-md align-self-center">
                    <select name="selectTimePeriod" aria-label="Select time period for data" class="float-end time-period-select me-3">
                        <option value="@defaultInitialPeriodDate">@month @year</option>
                        <option value="@lastMonth">Last Month</option>
                        <option value="@pastThreeMonths">Past 3 Months</option>
                        <option value="@pastSixMonths">Past 6 Months</option>
                        <option value="@pastTwelveMonths">Past 12 Months </option>
                </select>
            </div>
            </div>


            <div class="row justify-content-center pb-3">

                    <div class="tile-col">
                    <div class="card mt-3 mx-0 py-1 text-color text-md-start tile-budget">
                            <div class="card-body">
                            <div class="budget-amount mb-2">
                                <div id="budgetDisplay" class="justify-content-center">
                                    <h5 class="card-text text-color mb-0"></h5>
                                </div>
                                <form id="budgetForm" class="budget-form align-content-start hiddenElement">
                                    <label for="budgetValue">Budget: </label>
                                    <input id="budgetValue" name="amount" value="@Model.Budget.Amount" type="number" step="0.01" required>
                                    <button type="submit" form="budgetForm" aria-label="save budget" class="btn-transparent save-budget-btn p-0 float-end hiddenElement"><i class="bi bi-save" style="font-size: 1.5rem"></i></button>
                            </form>
                            </div>
                            <hr class="bg-ligth mt-0 mb-2">
                            <div class="text-center">
                                <h4 class="m-0 p-2 tile-amount">$1000</h4>
                                <span class="text-center budget-status text-color fs-5 mb-0"> Available</span>
                        </div>
                    </div>
                </div>
                </div>

                    <div class="tile-col">
                    <div class="card mt-3 mx-0 py-1 text-color text-md-start tile tile-net">
                            <div class="card-body">
                            <h5 class="card-text text-color mb-2">Net Balance</h5>
                            <hr class="bg-ligth mt-0 mb-2">
                            <div class="text-center">
                                <h4 class="text-center text-success m-0 p-2 tile-amount net-total-amount">$1000</h4>
                                <span class="text-center tile-time-period text-color fs-5 mb-0"> @month @year</span>
                        </div>
                    </div>
                </div>
                </div>

                    <div class="tile-col">
                    <div class="card mt-3 mx-0 py-1 text-color text-md-start tile tile-expense">
                            <div class="card-body">
                            <h5 class="card-text text-danger mb-2">Expense Balance</h5>
                            <hr class="bg-ligth mt-0 mb-2">
                            <div class="text-center">
                                <h4 class="text-center text-danger m-0 p-2 tile-amount expense-total-amount">$2000</h4>
                                <span class="text-center tile-time-period text-color fs-5 mb-0"> @month @year</span>
                        </div>
                    </div>
                </div>
                </div>

                    <div class="tile-col">
                    <div class="card mt-3 mx-0 py-1 text-color text-md-start tile tile-income">
                            <div class="card-body">
                            <h5 class="card-text text-success mb-2">Income Balance</h5>
                            <hr class="bg-ligth mt-0 mb-2">
                            <div class="text-center">
                                <h4 class="text-center text-success m-0 p-2 tile-amount income-total-amount">$1000</h4>
                                <span class="text-center tile-time-period text-color fs-5 mb-0"> @month @year</span>
                        </div>
                    </div>
                </div>
            </div>

            </div>


            <div class="w-100"></div>


            <div class="row justify-content-center">

                    <div class="table-col">
                    <div id="expensePartial" class="py-3">
                </div>
                </div>

                    <div class="table-col">
                    <div id="incomePartial" class="py-3" >
                </div>
            </div>

        </div>
    </div>
            </div>

        </div>




        <script type='text/javascript'>
    window.expensesGlobal = @Html.Raw(Json.Serialize(Model.Expenses));
    window.expenseCategoriesGlobal = @Html.Raw(Json.Serialize(Model.ExpenseCategories));

    window.recurrentExpensesGlobal = @Html.Raw(Json.Serialize(Model.RecurrentExpenses));

    window.incomesGlobal = @Html.Raw(Json.Serialize(Model.Incomes));
    window.incomeCategoriesGlobal = @Html.Raw(Json.Serialize(Model.IncomeCategories));

    window.budgetGlobal = @Html.Raw(Json.Serialize(Model.Budget));

    window.creditCardsGlobal = @Html.Raw(Json.Serialize(Model.CreditCards));
    window.accountsGlobal = @Html.Raw(Json.Serialize(Model.Accounts));
    window.debtsGlobal = @Html.Raw(Json.Serialize(Model.Debts));

    window.expensesTableCountGlobal = 0;
    window.incomesTableCountGlobal = 0;

        </script>

        <script src="~/js/mainPage/tiles.js"></script>
        <script src="~/js/mainPage/darkmode.js"></script>

        <script type="module" src="~/wwwroot/js/Table/TableSettingsParameters.js"></script>
        <script type="module" src="~/wwwroot/js/Table/TableSettingsParametersLocalStorage.js"></script>
        <script type="module" src="~/wwwroot/js/DataPeriodSelection.js"></script>
        <script type="module" src="~/wwwroot/js/Table/TablesViewLoader.js"></script>
        <script type="module" src="~/wwwroot/js/Table/CRUD/ReadApi.js"></script>
        <script type="module" src="~/wwwroot/js/Table/CRUD/UpdateLogic.js"></script>
        <script type="module" src="~/wwwroot/js/Table/CRUD/UpdateApi.js"></script>
        <script type="module" src="~/wwwroot/js/Table/Filter/FiltersFunctions.js"></script>

        <script type="module" src="~/wwwroot/js/Page Responsiveness/Responsiveness.js"></script>
        <script type="module" src="~/wwwroot/js/Page Responsiveness/InitialScreenSize.js"></script>

        <script type="module" src="~/wwwroot/js/Tiles/Tiles.js"></script>
        <script type="module" src="~/wwwroot/js/Tiles/Budget Tile/BudgetTile.js"></script>

        <script type="module" src="~/wwwroot/js/FinancialState/FinancialState.js"></script>

        <script type="module" src="~/wwwroot/js/Darkmode.js"></script>


    */
}



