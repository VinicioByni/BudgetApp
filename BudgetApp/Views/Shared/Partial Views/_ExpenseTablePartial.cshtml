@using BudgetApp.Models
@model ViewModel

<section class="expense-table-section">
    <h3 class="title">Expenses</h3>
    <div class="search-bar-container">
        <div class="table-actions-btns-container">
            <button type="button" class="add-btn">+ Add Expense</button>
            <button type="button" class="delete-btn">Delete Expense</button>
        </div>
        <form class="search-form">
            <div class="input-container">
                <label for="expense-search-input">Search</label>
                <input id="expense-search-input" type="text" placeholder="House..." />
                <button class="search-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" class="svg" viewBox="0 0 24 24" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                        <path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" />
                        <path d="M21 21l-6 -6" />
                    </svg>
                </button>
            </div>
            <div class="input-container">
                <label for="expense-date-search-input">Search date</label>
                <input id="expense-date-search-input" type="date" />
                <button class="search-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" class="svg" viewBox="0 0 24 24" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                        <path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" />
                        <path d="M21 21l-6 -6" />
                    </svg>
                </button>
            </div>
        </form>
    </div>
    <div class="table-container">
        <table class="expense-table">
            <thead>
                <tr>
                    <th>
                        <label class="sr-only">Expense check for all visible rows, to allow deletion of expenses</label>
                        <input class="visible-rows-checkbox" type="checkbox" />
                    </th>
                    <th>
                        <span class="th-content">
                            Type
                            <button class="sort-btn" type="button">
                                <svg xmlns="http://www.w3.org/2000/svg" class="svg-top" viewBox="0 0 24 24" stroke-width="1" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                    <path d="M12 1.67a2.914 2.914 0 0 0 -2.492 1.403l-8.11 13.537a2.914 2.914 0 0 0 2.484 4.385h16.225a2.914 2.914 0 0 0 2.503 -4.371l-8.116 -13.546a2.917 2.917 0 0 0 -2.494 -1.408z" stroke-width="0" />
                                </svg>
                                <svg xmlns="http://www.w3.org/2000/svg" class="svg-bottom" viewBox="0 0 24 24" stroke-width="1" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                    <path d="M20.118 3h-16.225a2.914 2.914 0 0 0 -2.503 4.371l8.116 13.549a2.917 2.917 0 0 0 4.987 .005l8.11 -13.539a2.914 2.914 0 0 0 -2.486 -4.386z" stroke-width="0" />
                                </svg>
                            </button>
                        </span>
                    </th>
                    <th>
                        <span class="th-content">
                            Date
                            <button class="sort-btn" type="button">
                                <svg xmlns="http://www.w3.org/2000/svg" class="svg-top" viewBox="0 0 24 24" stroke-width="1" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                    <path d="M12 1.67a2.914 2.914 0 0 0 -2.492 1.403l-8.11 13.537a2.914 2.914 0 0 0 2.484 4.385h16.225a2.914 2.914 0 0 0 2.503 -4.371l-8.116 -13.546a2.917 2.917 0 0 0 -2.494 -1.408z" stroke-width="0" />
                                </svg>
                                <svg xmlns="http://www.w3.org/2000/svg" class="svg-bottom" viewBox="0 0 24 24" stroke-width="1" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                    <path d="M20.118 3h-16.225a2.914 2.914 0 0 0 -2.503 4.371l8.116 13.549a2.917 2.917 0 0 0 4.987 .005l8.11 -13.539a2.914 2.914 0 0 0 -2.486 -4.386z" stroke-width="0" />
                                </svg>
                            </button>
                        </span>
                    </th>
                    <th>Payment method</th>
                    <th>
                        <span class="th-content">
                            Amount
                            <button class="sort-btn" type="button">
                                <svg xmlns="http://www.w3.org/2000/svg" class="svg-top" viewBox="0 0 24 24" stroke-width="1" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                    <path d="M12 1.67a2.914 2.914 0 0 0 -2.492 1.403l-8.11 13.537a2.914 2.914 0 0 0 2.484 4.385h16.225a2.914 2.914 0 0 0 2.503 -4.371l-8.116 -13.546a2.917 2.917 0 0 0 -2.494 -1.408z" stroke-width="0" />
                                </svg>
                                <svg xmlns="http://www.w3.org/2000/svg" class="svg-bottom" viewBox="0 0 24 24" stroke-width="1" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                    <path d="M20.118 3h-16.225a2.914 2.914 0 0 0 -2.503 4.371l8.116 13.549a2.917 2.917 0 0 0 4.987 .005l8.11 -13.539a2.914 2.914 0 0 0 -2.486 -4.386z" stroke-width="0" />
                                </svg>
                            </button>
                        </span>
                    </th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach (Expense expense in Model.Expenses)
                {
                    <tr>
                        <td>
                            <form id="expense-form-@expense.Id"></form>
                            <label class="sr-only">Expense check, to allow deletion of expense</label>
                            <input class="row-checkbox" type="checkbox" />
                        </td>
                        <td>
                            <span class="td table-data-type">@expense.ExpenseCategory.Name</span>
                            <label class="sr-only" aria-hidden="true">Expense type</label>
                            <select class="table-select" aria-hidden="true" form="expense-form-@expense.Id" placeholder="" required tabindex="-1">
                                <option>- Select type -</option>
                                @foreach (ExpenseCategory expenseCategory in Model.ExpenseCategories)
                                {
                                    if (expenseCategory.ExpenseCategoryId == expense.ExpenseCategoryId)
                                    {
                                        <option selected>@expenseCategory.Name</option>
                                    }
                                    else
                                    {
                                        <option>@expenseCategory.Name</option>
                                    }
                                   
                                }
                            </select>
                        </td>
                        <td>
                            <span class="td table-data-date">@expense.Date.ToString("MMM dd, yyyy")</span>
                            <label class="sr-only" aria-hidden="true">Date</label>
                            <input class="table-input" value="@expense.Date.ToString("yyyy-MM-dd")" aria-hidden="true" form="expense-form-@expense.Id" type="date" required tabindex="-1" />
                        </td>
                        <td>
                            @if (expense.Account != null)
                            {
                                <span class="td table-data-method">@expense.Account.Name</span>
                                <span class="td payment-method-type"> Debit</span>
                            }
                            @if (expense.CreditCard != null)
                            {
                                <span class="td table-data-method" style="background-color: #@expense.CreditCard.Color">@expense.CreditCard.Name</span>
                                <span class="td payment-method-type"> Credit</span>
                            }
                            @if (expense.Debt != null)
                            {
                                <span class="td table-data-method">@expense.Debt.Entity</span>
                                <span class="td payment-method-type"> Debt</span>
                            }
                            <label class="sr-only" aria-hidden="true">Payment method</label>
                            <select class="table-select" aria-hidden="true" form="expense-form-@expense.Id" required tabindex="-1">
                                <option>- Select payment method -</option>
                                @foreach(Account account in Model.Accounts)
                                {
                                     <optgroup label="Debit Accounts">
                                    @if (account.AccountId == expense.AccountId)
                                    {
                                        <option selected>@account.Name</option>
                                    }
                                    else
                                    {
                                        <option>@account.Name</option>
                                    }
                                    </optgroup>
                                }
                                @foreach (CreditCard creditCard in Model.CreditCards)
                                {
                                    <optgroup label="Credit cards">
                                    @if (creditCard.CreditCardId== expense.CreditCardId)
                                    {
                                        <option selected>@creditCard.Name</option>
                                    }
                                    else
                                    {
                                        <option>@creditCard.Name</option>
                                    }
                                    </optgroup>
                                }
                                @foreach (Debt debt in Model.Debts)
                                {
                                    <optgroup label="Debt options">
                                    @if (debt.DebtId== expense.DebtId)
                                    {
                                        <option selected>@debt.Entity</option>
                                    }
                                    else
                                    {
                                        <option>@debt.Entity</option>
                                    }
                                    </optgroup>
                                }
                            </select>
                        </td>
                        <td>
                            <span class="td table-data-amount">$ @expense.Amount</span>
                            <label class="sr-only" aria-hidden="true">Amount</label>
                            <input class="table-input" value="@expense.Amount" aria-hidden="true" form="expense-form-@expense.Id" type="number" required tabindex="-1" />
                        </td>
                        <td>
                            <button class="edit-btn" aria-hidden="false" type="button">
                                <svg xmlns="http://www.w3.org/2000/svg" class="svg svg-general-size" viewBox="0 0 24 24" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <path d="M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1"></path>
                                    <path d="M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z"></path>
                                    <path d="M16 5l3 3"></path>
                                </svg>
                            </button>
                            <button class="details-btn" aria-hidden="false" type="button">
                                <svg xmlns="http://www.w3.org/2000/svg" class="svg svg-general-size" viewBox="0 0 24 24" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                    <path d="M13 5h8" />
                                    <path d="M13 9h5" />
                                    <path d="M13 15h8" />
                                    <path d="M13 19h5" />
                                    <path d="M3 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z" />
                                    <path d="M3 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z" />
                                </svg>
                            </button>
                            <button class="save-btn" aria-hidden="true" tabindex="-1" type="button">
                                <svg xmlns="http://www.w3.org/2000/svg" class="svg svg-general-size" viewBox="0 0 24 24" stroke-width="2" stroke="#95b2be" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                    <path d="M5 12l5 5l10 -10" />
                                </svg>
                            </button>
                            <button class="cancel-btn" aria-hidden="true" tabindex="-1" type="button">
                                <svg xmlns="http://www.w3.org/2000/svg" class="svg svg-general-size" viewBox="0 0 24 24" stroke-width="2" stroke="#95b2be" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                    <path d="M18 6l-12 12" />
                                    <path d="M6 6l12 12" />
                                </svg>
                            </button>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
        <div class="table-pagination-container">
            <p class="page-info">Showing 1-3 of 28 expenses</p>
            <nav class="pagination-nav">
                <ul class="pagination-btn-list">
                    <li class="list-btn">
                        <button class="pagination-btn-svg">Prev</button>
                    </li>
                    <li class="list-btn">
                        <button class="pagination-btn">1</button>
                    </li>
                    <li class="list-btn">
                        <button class="pagination-btn">2</button>
                    </li>
                    <li class="list-btn">
                        <button class="pagination-btn">3</button>
                    </li>
                    <li class="list-btn">
                        <button class="pagination-btn">4</button>
                    </li>
                    <li class="list-btn">
                        <button class="pagination-btn">5</button>
                    </li>
                    <li class="list-btn">
                        <button class="pagination-btn-svg">Next</button>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</section>




@{
}
